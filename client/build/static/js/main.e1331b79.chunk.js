(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{49:function(e,t,a){e.exports=a(86)},77:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),s=a(13),o=a.n(s),u=a(16),i=a(8),m=a(9),E=a(19),p=a(46),d=a(47),b=a(6),f={token:localStorage.getItem("token"),isAuthenticated:null,user:null,signupErrors:{},loginErrors:{}},v={addExpenseStatus:"",getExpenseStatus:"",myExpense:[]},O=Object(E.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(b.a)(Object(b.a)({},e),{},{isAuthenticated:!0,user:n});case"AUTH_ERROR":return Object(b.a)(Object(b.a)({},e),{},{token:null,isAuthenticated:!1,user:null});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return Object(b.a)(Object(b.a)({},e),n);case"ADD_LOGIN_ERRORS":return Object(b.a)(Object(b.a)({},e),{},{loginErrors:Object(b.a)(Object(b.a)({},e.loginErrors),n),token:null,isAuthenticated:!1});case"CLEAR_LOGIN_ERRORS":return Object(b.a)(Object(b.a)({},e),{},{loginErrors:{}});case"ADD_SIGNUP_ERRORS":return Object(b.a)(Object(b.a)({},e),{},{signupErrors:Object(b.a)(Object(b.a)({},e.signupErrors),n),token:null,isAuthenticated:!1});case"CLEAR_SIGNUP_ERRORS":return Object(b.a)(Object(b.a)({},e),{},{signupErrors:{}});case"LOGOUT":return localStorage.removeItem("token"),Object(b.a)(Object(b.a)({},e),{},{token:null,isAuthenticated:!1,user:null});default:return e}},expense:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD_EXPENSE_PENDING":return Object(b.a)(Object(b.a)({},e),{},{addExpenseStatus:"PENDING"});case"ADD_EXPENSE_FAILURE":return Object(b.a)(Object(b.a)({},e),{},{addExpenseStatus:"FAILURE"});case"ADD_EXPENSE_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{addExpenseStatus:"SUCCESS"});case"ADD_EXPENSE_RESET":return Object(b.a)(Object(b.a)({},e),{},{addExpenseStatus:""});case"GET_EXPENSE_PENDING":return Object(b.a)(Object(b.a)({},e),{},{getExpenseStatus:"PENDING"});case"GET_EXPENSE_FAILURE":return Object(b.a)(Object(b.a)({},e),{},{getExpenseStatus:"FAILURE"});case"GET_EXPENSE_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{getExpenseStatus:"SUCCESS",myExpense:n});default:return e}}}),S=[d.a],h=Object(E.createStore)(O,{},Object(p.composeWithDevTools)(E.applyMiddleware.apply(void 0,S))),j=a(87),N=a(88),g=function(){var e=Object(m.c)((function(e){return{isAuthenticated:e.auth.isAuthenticated}})).isAuthenticated,t=Object(m.b)();return r.a.createElement(j.a,{className:"navbar-expand-sm navbar-dark bg-dark sticky-top display"},r.a.createElement(N.a,null,e?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-2"},r.a.createElement(u.b,{className:"navbar-brand",to:"/expense"},r.a.createElement("h3",null,"EXPENSELY"))),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbar-menu"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",onClick:function(){return t({type:"LOGOUT"})},to:"/"},"Logout"))))):r.a.createElement(u.b,{className:"navbar-brand col-12 text-center",to:"/"},r.a.createElement("h3",null,"EXPENSELY"))))},x=a(89),y=a(90),_=a(15),A=a(4),D=a.n(A),k=a(48),R=a.n(k),w=a(21),C=a(12),I=a.n(C),P=a(17),U=function(e){return function(t){return t({type:"ADD_SIGNUP_ERRORS",payload:e})}},G=function(e){return function(t){return t({type:"ADD_LOGIN_ERRORS",payload:e})}},L=function(){return function(){var e=Object(P.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("api/users/auth");case 3:a=e.sent,t({type:"USER_LOADED",payload:a.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),localStorage.removeItem("token"),t({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},X=(a(77),Object(i.f)((function(){var e=Object(n.useState)({mobileNumber:"",email:"",password:"",password2:""}),t=Object(_.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({}),s=Object(_.a)(l,2),u=s[0],i=s[1],E=Object(m.c)((function(e){return{signupErrors:e.auth.signupErrors}})).signupErrors,p=Object(m.b)();Object(n.useEffect)((function(){E&&i(E)}),[E]);var d=function(e){var t=Object(b.a)({},a),n=e.target,r=n.name,l=n.value;t[r]=l,c(t)};return r.a.createElement("div",{className:"card-body p-5"},r.a.createElement("h5",{className:"card-title display-4"},"SIGN UP"),r.a.createElement("form",{noValidate:!0,onSubmit:function(e){if(e.preventDefault(),""===a.mobileNumber)i({mobileNumber:"Mobile Number is mandatory"});else if(a.password!==a.password2)i({password2:"Confirm Password doesn't match's"});else{var t={mobileNumber:parseInt(a.mobileNumber),email:a.email,password:a.password};console.log(t),i({}),p(function(e){return function(){var t=Object(P.a)(I.a.mark((function t(a){var n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"CLEAR_SIGNUP_ERRORS"}),t.prev=1,t.next=4,o.a.post("api/users/signup",e);case 4:n=t.sent,a({type:"REGISTER_SUCCESS",payload:n.data}),o.a.defaults.headers.common.Authorization=n.data.token,localStorage.setItem("token",n.data.token),a(L()),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),r=t.t0.response.data.errors,console.log(r),r&&(localStorage.removeItem("token"),r.forEach((function(e){var t=e.param;a(U(Object(w.a)({},t,e.msg)))})));case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}},r.a.createElement("div",{className:"form-group"},r.a.createElement(R.a,{value:a.mobileNumber,onChange:function(e){var t=Object(b.a)({},a);t.mobileNumber=e,c(t)},placeholder:"Enter phone number",required:!0}),u.mobileNumber&&r.a.createElement("small",{className:"text-left text-danger"},u.mobileNumber)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:D()("form-control",{"is-invalid":u.email}),placeholder:"Email Address",name:"email",value:a.email,onChange:d}),u.email&&r.a.createElement("div",{className:"invalid-feedback text-left"},u.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:D()("form-control",{"is-invalid":u.password}),placeholder:"Password",name:"password",value:a.password,onChange:d}),u.password&&r.a.createElement("div",{className:"invalid-feedback text-left"},u.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:D()("form-control",{"is-invalid":u.password2}),placeholder:"Confirm Password",name:"password2",value:a.password2,onChange:d}),u.password2&&r.a.createElement("div",{className:"invalid-feedback text-left"},u.password2)),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"})))}))),T=Object(i.f)((function(){var e=Object(n.useState)({email:"",password:""}),t=Object(_.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({}),s=Object(_.a)(l,2),u=s[0],i=s[1],E=Object(m.c)((function(e){return{loginErrors:e.auth.loginErrors}})).loginErrors,p=Object(m.b)();Object(n.useEffect)((function(){E&&i(E)}),[E]);var d=function(e){var t=Object(b.a)({},a),n=e.target,r=n.name,l=n.value;t[r]=l,c(t)};return r.a.createElement("div",{className:"card-body p-5"},r.a.createElement("h5",{className:"card-title display-4"},"LOG IN"),r.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),i({}),console.log(a),p(function(e){return function(){var t=Object(P.a)(I.a.mark((function t(a){var n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"CLEAR_LOGIN_ERRORS"}),t.prev=1,t.next=4,o.a.post("api/users/login",e);case 4:n=t.sent,a({type:"LOGIN_SUCCESS",payload:n.data}),o.a.defaults.headers.common.Authorization=n.data.token,localStorage.setItem("token",n.data.token),a(L()),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),r=t.t0.response.data.errors,console.log(r),r&&(localStorage.removeItem("token"),r.forEach((function(e){var t=e.param;a(G(Object(w.a)({},t,e.msg)))})));case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(a))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:D()("form-control",{"is-invalid":u.email}),placeholder:"Email Address",name:"email",onChange:d}),u.email&&r.a.createElement("div",{className:"invalid-feedback text-left"},u.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:D()("form-control",{"is-invalid":u.password}),placeholder:"Password",name:"password",onChange:d}),u.password&&r.a.createElement("div",{className:"invalid-feedback text-left"},u.password)),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"})))})),F=Object(i.f)((function(e){var t=Object(m.c)((function(e){return{isAuthenticated:e.auth.isAuthenticated}})).isAuthenticated;return Object(n.useEffect)((function(){t&&e.history.replace("/expense")}),[t]),r.a.createElement(N.a,null,r.a.createElement(x.a,null,r.a.createElement(y.a,{md:"6"},r.a.createElement(X,null)),r.a.createElement(y.a,null,r.a.createElement(T,null))))})),Y=a(100),z=a(101),M=a(91),q=a(102),H=a(92),J=a(93),V=a(94),B=a(95),W=a(96),K=a(97),Q=a(98),Z=a(103),$=a(99),ee=function(){return function(){var e=Object(P.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_EXPENSE_PENDING"}),e.prev=1,e.next=4,o.a.get("api/expenses");case 4:a=e.sent,t({type:"GET_EXPENSE_SUCCESS",payload:a.data}),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),n=e.t0.response.data.errors,t({type:"GET_EXPENSE_FAILURE"}),console.log(n),n&&console.log(n);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},te=function(e){var t=Object(m.c)((function(e){return{addExpenseStatus:e.expense.addExpenseStatus}})).addExpenseStatus,a=Object(m.b)(),c=Object(n.useState)(!1),l=Object(_.a)(c,2),s=l[0],u=l[1],i=Object(n.useState)(""),E=Object(_.a)(i,2),p=E[0],d=E[1],f=Object(n.useState)(null),v=Object(_.a)(f,2),O=v[0],S=v[1],h=Object(n.useState)(null),j=Object(_.a)(h,2),N=j[0],g=j[1],x=function(){d(""),g(null),S(null),u(!1)};Object(n.useEffect)((function(){"SUCCESS"===t&&(a({type:"ADD_EXPENSE_RESET"}),x())}),[t]),Object(n.useEffect)((function(){e.exp&&(d(e.exp.description),g(e.exp.amount),S(e.exp.date.slice(0,10)))}),[e.exp]);var y=function(){return u(!s)};return r.a.createElement("div",null,"add"===e.button?r.a.createElement(M.a,{outline:!0,size:"lg",color:"secondary",className:"mx-3",onClick:y},"Add Expenses"):r.a.createElement(M.a,{outline:!0,color:"primary",onClick:y},"Edit"),r.a.createElement(q.a,{isOpen:s,toggle:y},r.a.createElement(H.a,{onSubmit:function(t){t.preventDefault();var n={description:p,date:O,amount:parseInt(N)};e.exp?a(function(e){return function(){var t=Object(P.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_EXPENSE_PENDING"}),t.prev=1,t.next=4,o.a.put("api/expenses",e);case 4:t.sent,a({type:"ADD_EXPENSE_SUCCESS"}),a(ee()),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),n=t.t0.response.data.errors,a({type:"ADD_EXPENSE_FAILURE"}),console.log(n),n&&console.log(n);case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(Object(b.a)(Object(b.a)({},n),{},{id:e.exp._id}))):a(function(e){return function(){var t=Object(P.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_EXPENSE_PENDING"}),t.prev=1,t.next=4,o.a.post("api/expenses",e);case 4:t.sent,a({type:"ADD_EXPENSE_SUCCESS"}),a(ee()),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),n=t.t0.response.data.errors,a({type:"ADD_EXPENSE_FAILURE"}),console.log(n),n&&console.log(n);case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(n))}},r.a.createElement(J.a,{toggle:y},e.heading),r.a.createElement(V.a,null,r.a.createElement(B.a,null,r.a.createElement(W.a,{for:"exampleText",sm:2},"Description"),r.a.createElement(K.a,{value:p,type:"textarea",name:"text",id:"exampleText",required:!0,onChange:function(e){return d(e.target.value)}})),r.a.createElement(B.a,null,r.a.createElement(W.a,{for:"exampleDate"},"Date"),r.a.createElement(K.a,{value:O,type:"date",name:"date",id:"exampleDate",onChange:function(e){return S(e.target.value)},placeholder:"date placeholder",required:!0})),r.a.createElement(B.a,null,r.a.createElement(W.a,{for:"exampleAmount"},"Amount"),r.a.createElement(Q.a,null,r.a.createElement(Z.a,{addonType:"prepend"},"\u20b9"),r.a.createElement(K.a,{value:N,placeholder:"00000",type:"number",id:"exampleAmount",onChange:function(e){return g(e.target.value)},required:!0})))),r.a.createElement($.a,null,r.a.createElement(M.a,{type:"submit",color:"primary"},e.exp?"Edit":"Add")," ",r.a.createElement(M.a,{color:"secondary",onClick:x},"Cancel")))))},ae=Object(i.f)((function(e){var t=Object(m.c)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user,myExpense:e.expense.myExpense}})),a=t.isAuthenticated,c=t.user,l=t.myExpense,s=Object(m.b)(),u=Object(n.useState)({}),i=Object(_.a)(u,2),E=i[0],p=i[1];Object(n.useEffect)((function(){a?s(ee()):e.history.replace("/")}),[a]),Object(n.useEffect)((function(){c&&p(c)}),[c]);var d=function(e){var t;s((t={id:e.target.id},function(){var e=Object(P.a)(I.a.mark((function e(a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.delete("api/expenses/?id=".concat(t.id));case 3:n=e.sent,console.log(n.data),a(ee()),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),r=e.t0.response.data.errors,console.log(r),r&&console.log(r);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))};return r.a.createElement(N.a,null,r.a.createElement(x.a,{className:"my-5"},r.a.createElement("h2",{className:"col-md-9"},r.a.createElement(Y.a,{color:"secondary"},E.email)),r.a.createElement(te,{button:"add",heading:"Add Expense"})),r.a.createElement(z.a,{striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Date (YYYY-MM-DD)"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,l.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.date.slice(0,10)),r.a.createElement("td",null,"\u20b9 ",e.amount),r.a.createElement("td",null,r.a.createElement(te,{button:"edit",heading:"Edit Expense",exp:e})),r.a.createElement("td",null,r.a.createElement(M.a,{outline:!0,color:"danger",id:e._id,onClick:d},"Delete")))})))))})),ne=function(){return Object(n.useEffect)((function(){localStorage.token?o.a.defaults.headers.common.Authorization=localStorage.token:delete o.a.defaults.headers.common.Authorization,h.dispatch(L())}),[]),r.a.createElement(m.a,{store:h},r.a.createElement(u.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:F}),r.a.createElement(i.a,{exact:!0,path:"/expense",component:ae})))))};a(85);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.e1331b79.chunk.js.map